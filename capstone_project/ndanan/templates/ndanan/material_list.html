
{# NOTE: This template is designed to be included in course_detail.html #}
<div class="material-list mt-3">
    {% if materials %}
        {% for material in materials %}
        <div class="card mb-2">
            <div class="card-body d-flex justify-content-between align-items-center">
                <div>
                    <i class="fas {% if material.is_video %}fa-video{% elif material.is_document %}fa-file-pdf{% else %}fa-book-open{% endif %} me-2"></i>
                    <a href="{% url 'material_detail' course.pk material.pk %}" class="card-title h5 text-decoration-none">
                        {{ material.title }}
                    </a>
                    <span class="badge bg-secondary ms-2">{{ material.type|default:"Lesson" }}</span>
                </div>

                <div class="d-flex align-items-center">
                    {# STUDENT: Show completion status #}
                    {% if user.is_student %}
                        {% if material in user.completed_materials.all %}
                            <span class="badge bg-success me-3"><i class="fas fa-check-circle"></i> Completed</span>
                        {% else %}
                            <span class="badge bg-warning text-dark me-3">Not Started</span>
                        {% endif %}
                    {% endif %}

                    {# TEACHER/ADMIN: Quick Edit/Delete #}
                    {% if user.is_teacher and user == course.teacher or user.is_admin %}
                        <a href="{% url 'material_edit' course.pk material.pk %}" class="btn btn-outline-dark btn-sm me-2">Edit</a>
                        <a href="{% url 'material_delete' course.pk material.pk %}" class="btn btn-outline-danger btn-sm">Delete</a>
                    {% endif %}
                </div>
            </div>
        </div>
        {% endfor %}
    {% else %}
        <div class="alert alert-info">
            There are no materials for this course yet.
        </div>
    {% endif %}
</div>